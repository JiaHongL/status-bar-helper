<!DOCTYPE html>
<html>
<head>
    <title>模組載入診斷</title>
</head>
<body>
    <h1>模組載入診斷</h1>
    <div id="log"></div>
    
    <!-- 模組載入 -->
    <script src="utils/i18n-helper.js"></script>
    <script src="utils/confirmation.js"></script>
    
    <script>
        const log = document.getElementById('log');
        
        function addLog(message) {
            console.log(message);
            log.innerHTML += '<div>' + new Date().toISOString() + ': ' + message + '</div>';
        }
        
        addLog('開始檢查模組載入...');
        
        // 立即檢查
        addLog('立即檢查:');
        addLog('- window.I18nHelper: ' + (!!window.I18nHelper));
        addLog('- window.ConfirmationSystem: ' + (!!window.ConfirmationSystem));
        addLog('- window.showChoiceDialog: ' + (typeof window.showChoiceDialog));
        addLog('- window.showToast: ' + (typeof window.showToast));
        
        // 100ms 後檢查
        setTimeout(() => {
            addLog('100ms 後檢查:');
            addLog('- window.I18nHelper: ' + (!!window.I18nHelper));
            addLog('- window.ConfirmationSystem: ' + (!!window.ConfirmationSystem));
            addLog('- window.showChoiceDialog: ' + (typeof window.showChoiceDialog));
            addLog('- window.showToast: ' + (typeof window.showToast));
        }, 100);
        
        // 500ms 後檢查
        setTimeout(() => {
            addLog('500ms 後檢查:');
            addLog('- window.I18nHelper: ' + (!!window.I18nHelper));
            addLog('- window.ConfirmationSystem: ' + (!!window.ConfirmationSystem));
            addLog('- window.showChoiceDialog: ' + (typeof window.showChoiceDialog));
            addLog('- window.showToast: ' + (typeof window.showToast));
            
            if (window.ConfirmationSystem) {
                const status = window.ConfirmationSystem.getDependencyStatus();
                addLog('依賴狀態: ' + JSON.stringify(status));
            }
        }, 500);
    </script>
</body>
</html>
