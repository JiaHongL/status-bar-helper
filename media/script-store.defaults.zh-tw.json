[
  {
    "command": "sbh.demo.logMinimalPlus",
    "text": "$(output) Log",
    "tooltip": "VS Code + Node å¿«é€Ÿç¤ºç¯„ï¼šåŒæ™‚è¼¸å‡ºåˆ° Output èˆ‡åº•éƒ¨æ—¥èªŒ",
    "hidden": true,
    "enableOnInit": false,
    "tags": [
      "default",
      "core"
    ],
    "script": "// Minimal Log: VS Code + Node (read-only, one-click, dual output)\nconst vscode = require('vscode');\nconst fs = require('fs');\nconst path = require('path');\nconst { vm } = statusBarHelper.v1;\n(function main(){ const ch = vscode.window.createOutputChannel('SBH Minimal Log'); const emit=(...a)=>{ const line=a.join(' '); ch.appendLine(line); console.log(line); }; ch.show(true); emit('â–¶ Start'); emit('Node: ' + process.version + '  Platform: ' + process.platform + '/' + process.arch); const ws=vscode.workspace.workspaceFolders; const root=ws&&ws.length?ws[0].uri.fsPath:process.cwd(); emit('Workdir: '+root); try { fs.readdirSync(root,{withFileTypes:true}).slice(0,8).forEach(e=>emit((e.isDirectory()?'[D] ':'[F] ')+e.name)); } catch(e){ emit('readdir failed: '+e.message); } const ed=vscode.window.activeTextEditor; if(ed&&ed.document.uri.scheme==='file'){ emit('Active file: '+path.basename(ed.document.uri.fsPath)+' ('+ed.document.languageId+')'); } emit('âœ” Done'); vscode.window.showInformationMessage('Log demo finished.'); vm.stop(); })();"
  },
  {
    "command": "sbh.demo.gitAdd",
    "text": "$(diff-added) Git Add",
    "tooltip": "å¿«é€ŸåŸ·è¡Œ git add .ï¼ˆç¬¬ä¸€å€‹å·¥ä½œå€ï¼‰",
    "hidden": true,
    "enableOnInit": false,
    "tags": [
      "default",
      "git"
    ],
    "script": "// Git Add: stage all\nconst vscode=require('vscode'); const { exec }=require('child_process'); const { vm }=statusBarHelper.v1; (function main(){ const ws=vscode.workspace.workspaceFolders; if(!ws||!ws.length){ vscode.window.showWarningMessage('æ²’æœ‰ workspaceï¼Œç„¡æ³• git add'); vm.stop(); return; } const cwd=ws[0].uri.fsPath; exec('git add .',{ cwd },(err)=>{ if(err){ vscode.window.showErrorMessage('Git add å¤±æ•—: '+(err.message||err)); vm.stop(); return; } vscode.window.showInformationMessage('âœ… git add . å®Œæˆ'); vm.stop(); }); })();"
  },
  {
    "command": "sbh.demo.storage",
    "text": "$(database) Storage",
    "tooltip": "storage / files API ç¯„ä¾‹ï¼šæ–‡å­—ã€JSONã€ä½å…ƒçµ„ã€éµå€¼",
    "hidden": true,
    "enableOnInit": false,
    "tags": [
      "default",
      "storage"
    ],
    "script": "// storage + files demo\nconst { Buffer }=require('buffer'); const { storage, files, vm }=statusBarHelper.v1; (async()=>{ const now=()=>new Date().toISOString(); const gPrev=await storage.global.get('demo.keep',{runs:0}); await storage.global.set('demo.keep',{...gPrev,runs:(gPrev.runs||0)+1,ts:now()}); try{ const wPrev=await storage.workspace.get('demo.keep',{runs:0}); await storage.workspace.set('demo.keep',{...wPrev,runs:(wPrev.runs||0)+1,ts:now()}); }catch{} const txt='demo/notes/hello.txt'; const old=(await files.exists('global',txt))?await files.readText('global',txt):''; await files.writeText('global',txt,old+'hi\n'); vm.stop(); })().catch(e=>{ console.error(e); vm.stop(); }); })();"
  },
  {
    "command": "sbh.demo.toggleTheme",
    "text": "$(color-mode)",
    "tooltip": "åˆ‡æ›äº®/æš—è‰²ä¸»é¡Œ",
    "hidden": false,
    "enableOnInit": false,
    "tags": [
      "default",
      "ui"
    ],
    "script": "const vscode=require('vscode'); const { vm }=statusBarHelper.v1; (async()=>{ try{ await vscode.commands.executeCommand('workbench.action.toggleLightDarkThemes'); }catch(e){ vscode.window.showErrorMessage('åˆ‡æ›ä¸»é¡Œå¤±æ•—'); } finally { vm.stop(); } })();"
  },
  {
    "command": "sbh.demo.whiteboard",
    "text": "$(paintcan) Board",
    "tooltip": "ç°¡æ˜“ç™½æ¿ Webviewï¼ˆç¯„ä¾‹ï¼‰",
    "hidden": false,
    "enableOnInit": false,
    "tags": [
      "default",
      "ui"
    ],
    "script": "// whiteboard minimal placeholder\nconst vscode=require('vscode'); const { vm }=statusBarHelper.v1; (function(){ const p=vscode.window.createWebviewPanel('sbhWhiteboard','Whiteboard',vscode.ViewColumn.Active,{enableScripts:true}); p.webview.html='<h3 style=\"font-family:var(--vscode-font-family);color:var(--vscode-foreground);\">Whiteboard Placeholder</h3>'; vm.onStop(()=>{ try{ p.dispose(); }catch{} }); p.onDidDispose(()=>vm.stop()); })();"
  },
  {
    "command": "sbh.demo.pomodoro",
    "text": "ğŸ… Pomodoro",
    "tooltip": "ç•ªèŒ„é˜è¨ˆæ™‚å™¨ï¼ˆç‹€æ…‹åˆ—ï¼‰",
    "hidden": true,
    "enableOnInit": true,
    "tags": [
      "default",
      "productivity"
    ],
    "script": "// pomodoro simplified\nconst vscode=require('vscode'); const { vm }=statusBarHelper.v1; (function(){ let item=vscode.window.createStatusBarItem(vscode.StatusBarAlignment.Right,1000); item.text='ğŸ… 25:00'; item.command=''; item.show(); vm.onStop(()=>{ try{ item.dispose(); }catch{} }); })();"
  },
  {
    "command": "sbh.demo.vmChatA",
    "text": "$(comment) Chat A",
    "tooltip": "VM è¨Šæ¯å‚³éç¤ºä¾‹ (A) â€” vm.open / sendMessage / onMessage",
    "hidden": true,
    "enableOnInit": false,
    "tags": [
      "default",
      "vm"
    ],
    "script": "// chat A minimal\nconst vscode=require('vscode'); const { vm }=statusBarHelper.v1; (function(){ vm.stop(); })();"
  },
  {
    "command": "sbh.demo.vmChatB",
    "text": "$(comment-discussion) Chat B",
    "tooltip": "VM è¨Šæ¯å‚³éç¤ºä¾‹ (B) â€” vm.open / sendMessage / onMessage",
    "hidden": true,
    "enableOnInit": false,
    "tags": [
      "default",
      "vm"
    ],
    "script": "// chat B minimal\nconst { vm }=statusBarHelper.v1; (function(){ vm.stop(); })();"
  }
]