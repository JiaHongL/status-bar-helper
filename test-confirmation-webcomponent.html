<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Confirmation Dialog Web Component Test</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            background: #1e1e1e;
            color: #cccccc;
        }
        
        .test-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #333;
            border-radius: 8px;
        }
        
        .test-button {
            padding: 8px 16px;
            margin: 5px;
            background: #0e639c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .test-button:hover {
            background: #1177bb;
        }
        
        .results {
            margin-top: 10px;
            padding: 10px;
            background: #252526;
            border-radius: 4px;
            font-family: 'Consolas', monospace;
            font-size: 12px;
        }
        
        h2 {
            color: #4fc1ff;
        }
        
        pre {
            background: #0d1117;
            padding: 10px;
            border-radius: 4px;
            color: #f0f6fc;
        }
    </style>
</head>
<body>
    <h1>üß© Confirmation Dialog Web Component Test</h1>
    
    <div class="test-section">
        <h2>Basic Tests</h2>
        <button class="test-button" onclick="testBasicConfirm()">Basic Confirm</button>
        <button class="test-button" onclick="testCustomChoices()">Custom Choices</button>
        <button class="test-button" onclick="testDeleteConfirm()">Delete Confirm</button>
        <div class="results" id="basic-results"></div>
    </div>
    
    <div class="test-section">
        <h2>Toast Tests</h2>
        <button class="test-button" onclick="testToastSuccess()">Success Toast</button>
        <button class="test-button" onclick="testToastError()">Error Toast</button>
        <button class="test-button" onclick="testToastWarning()">Warning Toast</button>
        <button class="test-button" onclick="testToastInfo()">Info Toast</button>
        <div class="results" id="toast-results"></div>
    </div>
    
    <div class="test-section">
        <h2>API Compatibility</h2>
        <button class="test-button" onclick="testGlobalAPI()">Test Global showChoiceDialog</button>
        <button class="test-button" onclick="testGlobalToast()">Test Global showToast</button>
        <button class="test-button" onclick="testConfirmationSystem()">Test ConfirmationSystem</button>
        <div class="results" id="api-results"></div>
    </div>
    
    <div class="test-section">
        <h2>Development Console</h2>
        <p>Open DevTools Console to see detailed logs and interact with the component.</p>
        <pre>
// ÂïüÁî® Web Components Ê®°Âºè
localStorage.setItem('sbh-use-web-components', 'true');

// Ê∏¨Ë©¶ API
await showChoiceDialog('Test', 'Choose option', ['Yes', 'No']);
showToast('success', 'Test message');

// Áõ¥Êé•Êìç‰ΩúÁµÑ‰ª∂
const dialog = document.querySelector('confirmation-dialog');
dialog.showToast('info', 'Direct component access');
        </pre>
    </div>

    <!-- ËºâÂÖ• Web Component -->
    <script>
        // Ê®°Êì¨ VS Code Áí∞Â¢ÉÁöÑ CSS ËÆäÊï∏
        document.documentElement.style.setProperty('--vscode-font-family', '"Segoe UI", Tahoma, Geneva, Verdana, sans-serif');
        document.documentElement.style.setProperty('--vscode-font-size', '13px');
        document.documentElement.style.setProperty('--vscode-foreground', '#cccccc');
        document.documentElement.style.setProperty('--vscode-editor-background', '#1e1e1e');
        document.documentElement.style.setProperty('--vscode-panel-border', '#2d2d30');
        document.documentElement.style.setProperty('--vscode-button-background', '#0e639c');
        document.documentElement.style.setProperty('--vscode-button-foreground', '#ffffff');
        document.documentElement.style.setProperty('--vscode-button-hoverBackground', '#1177bb');
        document.documentElement.style.setProperty('--vscode-button-secondaryBackground', '#3c3c3c');
        document.documentElement.style.setProperty('--vscode-button-secondaryForeground', '#cccccc');
        document.documentElement.style.setProperty('--vscode-button-secondaryHoverBackground', '#464647');
        document.documentElement.style.setProperty('--vscode-quickInput-background', '#252526');
        document.documentElement.style.setProperty('--vscode-quickInput-border', '#2d2d30');
        document.documentElement.style.setProperty('--vscode-notifications-background', '#252526');
        document.documentElement.style.setProperty('--vscode-notifications-border', '#2d2d30');
        document.documentElement.style.setProperty('--vscode-notifications-foreground', '#cccccc');
        document.documentElement.style.setProperty('--vscode-testing-iconPassed', '#73c991');
        document.documentElement.style.setProperty('--vscode-testing-iconFailed', '#f14c4c');
        document.documentElement.style.setProperty('--vscode-testing-iconSkipped', '#cca700');
        document.documentElement.style.setProperty('--vscode-testing-iconQueued', '#007acc');
    </script>
    
    <!-- Ê®°Êì¨Âü∫Á§é‰æùË≥¥ -->
    <script>
        // Ê®°Êì¨ I18nHelperÔºàÁ∞°ÂåñÁâàÔºâ
        window.I18nHelper = {
            getNlsText: function(key, fallback) {
                const translations = {
                    'ok': 'OK',
                    'cancel': 'Cancel', 
                    'delete': 'Delete',
                    'save': 'Save'
                };
                return translations[key] || fallback || key;
            }
        };
    </script>
    
    <!-- ËºâÂÖ• Web Component -->
    <script src="./components/confirmation-dialog.js"></script>
    
    <!-- Ê∏¨Ë©¶ËÖ≥Êú¨ -->
    <script>
        function log(section, message) {
            const results = document.getElementById(section + '-results');
            const timestamp = new Date().toLocaleTimeString();
            results.innerHTML += `<div>[${timestamp}] ${message}</div>`;
        }
        
        // Âü∫Êú¨Ê∏¨Ë©¶
        async function testBasicConfirm() {
            try {
                const result = await ConfirmationSystem.confirm('Do you agree?');
                log('basic', `Basic confirm result: ${result}`);
            } catch (error) {
                log('basic', `Error: ${error.message}`);
            }
        }
        
        async function testCustomChoices() {
            try {
                const result = await showChoiceDialog('Choose Action', 'What would you like to do?', ['Save', 'Don\'t Save', 'Cancel']);
                log('basic', `Custom choices result: "${result}"`);
            } catch (error) {
                log('basic', `Error: ${error.message}`);
            }
        }
        
        async function testDeleteConfirm() {
            try {
                const result = await ConfirmationSystem.confirmDelete('test-item.txt');
                log('basic', `Delete confirm result: ${result}`);
            } catch (error) {
                log('basic', `Error: ${error.message}`);
            }
        }
        
        // Toast Ê∏¨Ë©¶
        function testToastSuccess() {
            ConfirmationSystem.showSuccess('Operation completed successfully!');
            log('toast', 'Success toast displayed');
        }
        
        function testToastError() {
            ConfirmationSystem.showError('Something went wrong!');
            log('toast', 'Error toast displayed');
        }
        
        function testToastWarning() {
            ConfirmationSystem.showWarning('This action cannot be undone');
            log('toast', 'Warning toast displayed');
        }
        
        function testToastInfo() {
            ConfirmationSystem.showInfo('Here is some useful information');
            log('toast', 'Info toast displayed');
        }
        
        // API Áõ∏ÂÆπÊÄßÊ∏¨Ë©¶
        async function testGlobalAPI() {
            try {
                if (typeof showChoiceDialog === 'function') {
                    log('api', '‚úÖ Global showChoiceDialog function exists');
                    const result = await showChoiceDialog('Global API Test', 'Testing global function', ['Test', 'Cancel']);
                    log('api', `Global showChoiceDialog result: "${result}"`);
                } else {
                    log('api', '‚ùå Global showChoiceDialog function missing');
                }
            } catch (error) {
                log('api', `Error: ${error.message}`);
            }
        }
        
        function testGlobalToast() {
            try {
                if (typeof showToast === 'function') {
                    log('api', '‚úÖ Global showToast function exists');
                    showToast('info', 'Testing global toast function');
                    log('api', 'Global showToast executed');
                } else {
                    log('api', '‚ùå Global showToast function missing');
                }
            } catch (error) {
                log('api', `Error: ${error.message}`);
            }
        }
        
        async function testConfirmationSystem() {
            try {
                if (window.ConfirmationSystem) {
                    log('api', '‚úÖ ConfirmationSystem object exists');
                    ConfirmationSystem.showInfo('Testing ConfirmationSystem object');
                    log('api', 'ConfirmationSystem method executed');
                } else {
                    log('api', '‚ùå ConfirmationSystem object missing');
                }
            } catch (error) {
                log('api', `Error: ${error.message}`);
            }
        }
        
        // ÂàùÂßãÂåñÊôÇÁöÑÊ™¢Êü•
        document.addEventListener('DOMContentLoaded', () => {
            log('api', 'Page loaded - checking component availability...');
            
            setTimeout(() => {
                const dialog = document.querySelector('confirmation-dialog');
                if (dialog) {
                    log('api', '‚úÖ confirmation-dialog element found in DOM');
                } else {
                    log('api', '‚ùå confirmation-dialog element not found');
                }
                
                if (window.ConfirmationSystem) {
                    log('api', '‚úÖ ConfirmationSystem global object available');
                } else {
                    log('api', '‚ùå ConfirmationSystem global object missing');
                }
                
                if (customElements.get('confirmation-dialog')) {
                    log('api', '‚úÖ confirmation-dialog custom element registered');
                } else {
                    log('api', '‚ùå confirmation-dialog custom element not registered');
                }
            }, 100);
        });
    </script>
</body>
</html>
